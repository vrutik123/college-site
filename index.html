<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Campus Flow - Login</title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #0F172A;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 16px;
}

.login-container {
    width: 100%;
    max-width: 380px;
}

.logo-section {
    text-align: center;
    margin-bottom: 32px;
}

.logo {
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, #06B6D4, #3B82F6);
    border-radius: 16px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 16px;
    box-shadow: 0 0 40px rgba(6, 182, 212, 0.3);
}

.logo span {
    font-size: 24px;
    font-weight: 700;
    color: white;
}

.logo-section h1 {
    font-size: 24px;
    font-weight: 700;
    color: #F8FAFC;
}

.logo-section p {
    font-size: 14px;
    color: #94A3B8;
}

.login-card {
    background: rgba(30, 41, 59, 0.5);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(148, 163, 184, 0.1);
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.3);
}

.form-group {
    margin-bottom: 18px;
}

label {
    display: block;
    font-size: 14px;
    font-weight: 500;
    color: #F8FAFC;
    margin-bottom: 6px;
}

input {
    width: 100%;
    height: 44px;
    background: rgba(15, 23, 42, 0.5);
    border: 1px solid rgba(148, 163, 184, 0.2);
    border-radius: 12px;
    padding: 0 14px;
    font-size: 14px;
    color: #F8FAFC;
}

input::placeholder {
    color: #64748B;
}

input:focus {
    outline: none;
    border-color: rgba(6, 182, 212, 0.5);
    box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.1);
}

.password-wrapper {
    position: relative;
}

.password-wrapper svg {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    width: 22px;
    height: 22px;
    cursor: pointer;
    fill: #94A3B8;
}

.submit-btn {
    width: 100%;
    height: 44px;
    background: linear-gradient(135deg, #06B6D4, #3B82F6);
    border: none;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 600;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.submit-btn.loading {
    opacity: 0.8;
    cursor: not-allowed;
}

.spinner {
    width: 16px;
    height: 16px;
    border: 2px solid rgba(255,255,255,0.3);
    border-top-color: white;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    display: none;
}

.submit-btn.loading .spinner {
    display: block;
}

.submit-btn.loading span {
    display: none;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.error-message {
    color: #F87171;
    text-align: center;
    margin-top: 14px;
    display: none;
}
</style>
</head>

<body>

<div class="login-container">

    <div class="logo-section">
        <div class="logo"><span>CF</span></div>
        <h1>Campus Flow</h1>
        <p>Sign in to your campus ecosystem</p>
    </div>

    <div class="login-card">
        <form id="login-form" autocomplete="off">

            <div class="form-group">
                <label>Student Name</label>
                <input type="text" id="student-name" name="student-name" placeholder="Enter your name" required>
            </div>

            <div class="form-group">
                <label>ID Number</label>
                <input type="text" id="student-id" name="student-id" placeholder="Enter ID number" required>
            </div>

            <div class="form-group">
                <label>Password</label>
                <div class="password-wrapper">
                    <input type="password" id="password" name="password" placeholder="Enter password" required>
                    <svg id="togglePassword" viewBox="0 0 24 24">
                        <path d="M12 5c-7 0-12 7-12 7s5 7 12 7 12-7 12-7-5-7-12-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
                    </svg>
                </div>
            </div>

            <button class="submit-btn" id="submitBtn">
                <div class="spinner"></div>
                <span>Sign In</span>
            </button>

            <div class="error-message" id="errorMsg">
                Invalid username or password
            </div>

        </form>
    </div>

</div>

<script>
const form = document.getElementById('login-form');
const btn = document.getElementById('submitBtn');
const errorMsg = document.getElementById('errorMsg');
const password = document.getElementById('password');

document.getElementById('togglePassword').onclick = () => {
    password.type = password.type === "password" ? "text" : "password";
};

form.addEventListener('submit', async (e) => {
    e.preventDefault();
    errorMsg.style.display = "none";
    btn.classList.add('loading');

    const formData = new FormData(form);

    try {
        const response = await fetch('https://newwwww-1-xsbh.onrender.com/login', {
            method: 'POST',
            body: formData
        });

        if (response.ok) {
            localStorage.setItem('studentName',
                document.getElementById('student-name').value
            );
            window.location.href = 'home.html';
        } else {
            errorMsg.style.display = "block";
        }
    } catch {
        alert("Backend not reachable");
    }

    btn.classList.remove('loading');
});
</script>

</body>
</html>
